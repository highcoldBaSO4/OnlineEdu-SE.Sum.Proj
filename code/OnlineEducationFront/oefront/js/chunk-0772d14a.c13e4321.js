(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0772d14a"],{2555:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-header",[n("h1",{staticClass:"titlesytle"},[t._v("课程公告")])]),n("el-main",[n("el-button",{staticClass:"addbotton",attrs:{icon:"el-icon-plus"},on:{click:t.addAnnounce}},[t._v("\n                发布公告\n            ")]),n("el-button",{staticClass:"addbotton",attrs:{icon:"el-icon-location"},on:{click:t.addSignIn}},[t._v("\n                发布签到\n            ")]),n("div",[n("el-collapse",t._l(t.announcements,function(e){return n("el-collapse-item",{key:e.issueDate},[n("template",{slot:"title"},[n("h2",[t._v(t._s(e.title))]),t._v("\n                                \n                            "),n("span",{staticClass:"float-right"},[t._v(t._s(e.issueDate))])]),n("div",[n("el-button",{attrs:{type:"button",icon:"el-icon-edit"},on:{click:function(n){return t.handleEdit(e)}}},[t._v("\n                                编辑\n                            ")]),n("el-button",{attrs:{type:"button",icon:"el-icon-delete"},on:{click:function(n){return t.handleDel(e)}}},[t._v("\n                                删除\n                            ")])],1),n("div",[n("pre",{staticClass:"announce-font"},[t._v(t._s(e.content))])])],2)}),1)],1),n("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,"lock-scroll":!1,top:"5%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{type:"text"},model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1)],1),n("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),"create"===t.dialogStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("\n                    添加\n                ")]):n("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("\n                    修改\n                ")])],1)],1),n("el-dialog",{attrs:{title:t.发布签到,visible:t.signDialogVisible,"lock-scroll":!1,top:"5%"},on:{"update:visible":function(e){t.signDialogVisible=e}}},[n("el-form",{ref:"signInForm",attrs:{model:t.signInForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"签到时间"}},[n("el-col",{attrs:{span:11}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择开始时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.signInForm.startDate,callback:function(e){t.$set(t.signInForm,"startDate",e)},expression:"signInForm.startDate"}})],1),n("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),n("el-col",{attrs:{span:11}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择结束时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.signInForm.endDate,callback:function(e){t.$set(t.signInForm,"endDate",e)},expression:"signInForm.endDate"}})],1)],1),n("el-form-item",{attrs:{label:"选择地点"}},[n("div",{staticStyle:{width:"100%",height:"100%"}},[n("baidu-map",{staticClass:"map",attrs:{center:t.center,"scroll-wheel-zoom":"true",zoom:"15"},on:{click:t.getClickInfo,ready:t.handler}},[n("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),n("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),n("bm-marker",{attrs:{position:{lng:t.center.lng,lat:t.center.lat},dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"},model:{value:t.signPosition,callback:function(e){t.signPosition=e},expression:"signPosition"}},[n("bm-label",{attrs:{content:"签到地点",labelStyle:{color:"black",fontSize:"15px"},offset:{width:-35,height:30}}})],1)],1)],1)])],1),n("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(e){t.signDialogVisible=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.createSign}},[t._v("\n                    发布\n                ")])],1)],1)],1)],1)},o=[],a={name:"TeacherCourseAnnounce",data:function(){return{announcements:this.$store.getters.getCourseInfo.notices,dialogFormVisible:!1,signDialogVisible:!1,dialogStatus:"",textMap:{update:"编辑公告",create:"发布公告"},editForm:{title:"",content:""},signInForm:{endDate:"",startDate:""},center:{lng:116.404,lat:39.915}}},methods:{addAnnounce:function(){this.dialogFormVisible=!0,this.dialogStatus="create"},addSignIn:function(){this.signDialogVisible=!0},handleDel:function(){alert("已删除")},handleEdit:function(t){this.dialogStatus="update",this.dialogFormVisible=!0,this.editForm=Object.assign({},t)},createData:function(){this.$http.request({url:"/api/courses/"+this.$store.getters.getCourseId+"/notices/",method:"post",headers:this.$store.getters.authRequestHead,data:{content:this.editForm.content,title:this.editForm.title}}).then(function(t){console.log(t.data),alert("添加公告成功")}).catch(function(t){console.log(t.response),alert("请求失败")}),this.dialogFormVisible=!1},updateData:function(){alert("公告修改成功"),this.dialogFormVisible=!1},createSign:function(){console.log(this.center),this.$http.request({url:"/api/courses/"+this.$store.getters.getCourseId+"/signIns",method:"post",headers:this.$store.getters.authRequestHead,data:{endDate:this.signInForm.endDate,latitude:this.center.lat,longitude:this.center.lng,startDate:this.signInForm.startDate}}).then(function(t){console.log(t.data),alert("发布签到成功")}).catch(function(t){console.log(t.response),alert("请求失败")})},getClickInfo:function(t){this.center.lng=t.point.lng,this.center.lat=t.point.lat},handler:function(t){t.BMap;this.tools.analysisAddress([{lng:116.307852,lat:40.057031},{lng:116.307852,lat:40.057031}],function(t){console.log(t)})}}},s=a,l=(n("98d0"),n("2877")),r=Object(l["a"])(s,i,o,!1,null,"0c6eed3c",null);e["default"]=r.exports},"98d0":function(t,e,n){"use strict";var i=n("9fdf"),o=n.n(i);o.a},"9fdf":function(t,e,n){}}]);
//# sourceMappingURL=chunk-0772d14a.c13e4321.js.map