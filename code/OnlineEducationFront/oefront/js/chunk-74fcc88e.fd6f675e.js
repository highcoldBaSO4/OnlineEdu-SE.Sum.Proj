(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74fcc88e"],{"0a0e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-header",[s("h1",{staticClass:"titlesytle"},[t._v("课程作业")])]),s("el-main",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.AssignData.filter(function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())})}},[s("el-table-column",{attrs:{prop:"start",label:"开始时间",sortable:"true","min-width":"25%"}}),s("el-table-column",{attrs:{prop:"end",label:"结束时间",sortable:"true","min-width":"25%"}}),s("el-table-column",{attrs:{prop:"title",label:"作业名",sortable:"true","min-width":"40%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-link",{on:{click:function(s){return t.loadPaperPage(e.$index,e.row)}}},[t._v(t._s(e.row.title))])]}}])}),s("el-table-column",{attrs:{"min-width":"40%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-document-checked"},on:{click:function(s){return t.handleCorrection(e.$index,e.row)}}},[t._v("\n                            批改\n                        ")]),s("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(s){return t.handleEdit(e.$index,e.row)}}},[t._v("\n                            编辑\n                        ")]),s("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return t.handleDelete(e.$index,e.row)}}},[t._v("\n                            删除\n                        ")])]}}])},[s("template",{slot:"header"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("添加作业")])],1)],2)],1)],1),s("el-dialog",{attrs:{title:"作业",visible:t.AssignVisible,"lock-scroll":!1,top:"5%",width:"80%"},on:{"update:visible":function(e){t.AssignVisible=e}}},[s("el-form",{ref:"AssignEditForm",attrs:{model:t.AssignEditForm,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"作业名"}},[s("el-input",{attrs:{type:"text"},model:{value:t.AssignEditForm.title,callback:function(e){t.$set(t.AssignEditForm,"title",e)},expression:"AssignEditForm.title"}})],1),s("el-form-item",{attrs:{label:"作业时间"}},[s("el-col",{attrs:{span:11}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择开始时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.AssignEditForm.start,callback:function(e){t.$set(t.AssignEditForm,"start",e)},expression:"AssignEditForm.start"}})],1),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),s("el-col",{attrs:{span:11}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择结束时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.AssignEditForm.end,callback:function(e){t.$set(t.AssignEditForm,"end",e)},expression:"AssignEditForm.end"}})],1)],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.AssignEditForm.description,callback:function(e){t.$set(t.AssignEditForm,"description",e)},expression:"AssignEditForm.description"}})],1)],1),s("el-table",{attrs:{data:t.questions,height:"300px"},on:{"selection-change":t.handleSelectionChange},model:{value:t.AssignEditForm.questionFormList,callback:function(e){t.$set(t.AssignEditForm,"questionFormList",e)},expression:"AssignEditForm.questionFormList"}},[s("el-table-column",{attrs:{type:"selection","min-width":"10%"}}),s("el-table-column",{attrs:{property:"questionType",label:"题型",sortable:"true","min-width":"20%"}}),s("el-table-column",{attrs:{property:"content",label:"题目","min-width":"40%","show-overflow-tooltip":"true"}}),s("el-table-column",{attrs:{property:"score",label:"分值","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{attrs:{placeholder:"请输入分值",type:"number"},model:{value:e.row.score,callback:function(s){t.$set(e.row,"score",s)},expression:"scope.row.score"}})]}}])})],1),s("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(e){t.AssignVisible=!1}}},[t._v("取消")]),"create"===t.AssignStatus?s("el-button",{attrs:{type:"primary"},on:{click:t.createAssign}},[t._v("添加")]):s("el-button",{attrs:{type:"primary"},on:{click:t.updateAssign}},[t._v("修改")])],1)],1)],1)},n=[],o={name:"TeacherCourseAssign",data:function(){return{search:"",AssignData:this.$store.getters.getCourseInfo.papers,AssignVisible:!1,AssignEditForm:{description:"",title:"",start:"",end:"",questionFormList:[{questionId:"",questionNumber:1,score:0}]},textMap:{update:"Edit",create:"Create"},AssignStatus:"",questions:[],multipleSelection:[]}},methods:{handleAdd:function(){this.AssignEditForm=[],this.AssignStatus="create",this.AssignVisible=!0},handleCorrection:function(t,e){for(var s=0,i=0;i<e.questions.length;i++)"SUBJECTIVE"===e.questions[i].paperWithQuestionsPrimaryKey.question.questionType&&s++;s>0?(this.$store.commit("setPaperId",e.id),this.$store.commit("setPaperTitle",e.title),this.$router.push("/course/manager/correction")):alert("这份作业没有主观题")},handleEdit:function(t,e){this.AssignEditForm=Object.assign({},e),this.AssignStatus="update",this.AssignVisible=!0},handleDelete:function(t,e){alert(e.title+"已删除")},createAssign:function(){for(var t=[],e=0;e<this.multipleSelection.length;e++){var s={questionId:"",questionNumber:1,score:0};s.questionId=this.multipleSelection[e].id,s.score=this.multipleSelection[e].score,s.questionNumber=e+1,t.push(s)}this.AssignEditForm.questionFormList=t,console.log(this.AssignEditForm),console.log(this.AssignEditForm.start),this.$http.request({url:"/api/courses/"+this.$store.getters.getCourseId+"/papers",method:"post",headers:this.$store.getters.authRequestHead,data:{title:this.AssignEditForm.title,description:this.AssignEditForm.description,start:this.AssignEditForm.start,end:this.AssignEditForm.end,questionFormList:t}}).then(function(t){console.log(t.data),alert("请求成功")}).catch(function(t){console.log(t),alert("请求失败")}),this.AssignVisible=!1},updateAssign:function(){},handleSelectionChange:function(t){this.multipleSelection=t},loadPaperPage:function(t,e){this.$router.push({name:"courseStudentPaper",params:{paperId:e.id}})}},mounted:function(){for(var t=this.$store.getters.getCourseInfo.coursePrototype.questions,e=0;e<t.length;e++){var s={id:"",question:"",questionType:"",score:""};s.id=t[e].id,s.questionType=t[e].questionType,s.content=t[e].content,s.score=0,this.questions.push(s)}console.log(this.questions)}},r=o,l=(s("c490"),s("2877")),a=Object(l["a"])(r,i,n,!1,null,"69dbfb91",null);e["default"]=a.exports},"0adf":function(t,e,s){},c490:function(t,e,s){"use strict";var i=s("0adf"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-74fcc88e.fd6f675e.js.map