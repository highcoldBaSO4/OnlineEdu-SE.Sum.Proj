(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-658b36df"],{"02f4":function(t,e,o){var s=o("4588"),r=o("be13");t.exports=function(t){return function(e,o){var n,i,a=String(r(e)),c=s(o),l=a.length;return c<0||c>=l?t?"":void 0:(n=a.charCodeAt(c),n<55296||n>56319||c+1===l||(i=a.charCodeAt(c+1))<56320||i>57343?t?a.charAt(c):n:t?a.slice(c,c+2):i-56320+(n-55296<<10)+65536)}}},"0390":function(t,e,o){"use strict";var s=o("02f4")(!0);t.exports=function(t,e,o){return e+(o?s(t,e).length:1)}},"0bfb":function(t,e,o){"use strict";var s=o("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0cea":function(t,e,o){"use strict";var s=o("db96"),r=o.n(s);r.a},"0ead":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-collapse",t._l(t.sectionForum,function(e){return o("el-collapse-item",{key:e.secNo,attrs:{title:e.title}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"float-left"},[o("h2",[t._v(t._s(e.title))])]),o("div",{staticClass:"float-left add-topic"},[o("AddForumTopic",{attrs:{"sec-no":e.secNo}})],1)]),o("div",t._l(e.topics,function(t){return o("CourseForumStart",{key:t.createdAt,attrs:{"forum-topic":t}})}),1)])}),1)},r=[],n=(o("28a5"),o("ac4d"),o("8a81"),o("ac6a"),o("55dd"),o("58fa")),i=o("6663"),a={name:"UserCourseForum",components:{AddForumTopic:i["a"],CourseForumStart:n["a"]},data:function(){return{sectionForum:[{secNo:1,title:"第一章",topics:[{content:"string",courseId:0,createdAt:"2019-07-27T14:51:13.216Z",id:"string",imageUrls:["string"],likes:0,path:"string",secNo:1,title:"string",userId:0,responses:[{content:"string",courseId:0,createdAt:"2019-07-27T14:51:13.216Z",id:"string",imageUrls:["string"],likes:0,path:"string",secNo:1,title:"string",userId:0,responses:[]}]}]}]}},mounted:function(){var t=this;for(var e in this.sectionForum=this.$store.getters.getSectionList,this.sectionForum)this.sectionForum[e].topics=[];this.$http.request({url:this.$store.getters.getCourseUrl+"forums",method:"get",headers:this.$store.getters.authRequestHead}).then(function(e){var o=e.data;o.sort(function(t,e){return t.secNo===e.secNo?t.path<e.path?-1:1:t.secNo<e.secNo?-1:1}),console.log(o);var s=0,r=t.sectionForum.length,n=[{}],i=1,a=!0,c=!1,l=void 0;try{for(var u,d=o[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;p.responses=[];var f=p.path.split("/"),h=f.length;if(2===h){for(i=2,n.shift(),n.unshift(p);s<r;++s)if(t.sectionForum[s].secNo===p.secNo){t.sectionForum[s].topics.push(p);break}}else{if(h<=i){for(var v=i-h+1,m=0;m<v;++m)n.shift();i=v}n[0].responses.push(p),n.unshift(p),i=h}}}catch(g){c=!0,l=g}finally{try{a||null==d.return||d.return()}finally{if(c)throw l}}console.log(t.sectionForum),t.$forceUpdate()})}},c=a,l=(o("0cea"),o("2877")),u=Object(l["a"])(c,s,r,!1,null,"71846ba8",null);e["default"]=u.exports},"214f":function(t,e,o){"use strict";o("b0c5");var s=o("2aba"),r=o("32e9"),n=o("79e5"),i=o("be13"),a=o("2b4c"),c=o("520a"),l=a("species"),u=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var o="ab".split(t);return 2===o.length&&"a"===o[0]&&"b"===o[1]}();t.exports=function(t,e,o){var p=a(t),f=!n(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),h=f?!n(function(){var e=!1,o=/a/;return o.exec=function(){return e=!0,null},"split"===t&&(o.constructor={},o.constructor[l]=function(){return o}),o[p](""),!e}):void 0;if(!f||!h||"replace"===t&&!u||"split"===t&&!d){var v=/./[p],m=o(i,p,""[t],function(t,e,o,s,r){return e.exec===c?f&&!r?{done:!0,value:v.call(e,o,s)}:{done:!0,value:t.call(o,e,s)}:{done:!1}}),g=m[0],b=m[1];s(String.prototype,t,g),r(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,o){"use strict";var s=o("aae3"),r=o("cb7c"),n=o("ebd6"),i=o("0390"),a=o("9def"),c=o("5f1b"),l=o("520a"),u=o("79e5"),d=Math.min,p=[].push,f="split",h="length",v="lastIndex",m=4294967295,g=!u(function(){RegExp(m,"y")});o("214f")("split",2,function(t,e,o,u){var b;return b="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[h]||2!="ab"[f](/(?:ab)*/)[h]||4!="."[f](/(.?)(.?)/)[h]||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!s(t))return o.call(r,t,e);var n,i,a,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,f=void 0===e?m:e>>>0,g=new RegExp(t.source,u+"g");while(n=l.call(g,r)){if(i=g[v],i>d&&(c.push(r.slice(d,n.index)),n[h]>1&&n.index<r[h]&&p.apply(c,n.slice(1)),a=n[0][h],d=i,c[h]>=f))break;g[v]===n.index&&g[v]++}return d===r[h]?!a&&g.test("")||c.push(""):c.push(r.slice(d)),c[h]>f?c.slice(0,f):c}:"0"[f](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)}:o,[function(o,s){var r=t(this),n=void 0==o?void 0:o[e];return void 0!==n?n.call(o,r,s):b.call(String(r),o,s)},function(t,e){var s=u(b,t,this,e,b!==o);if(s.done)return s.value;var l=r(t),p=String(this),f=n(l,RegExp),h=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),x=new f(g?l:"^(?:"+l.source+")",v),R=void 0===e?m:e>>>0;if(0===R)return[];if(0===p.length)return null===c(x,p)?[p]:[];var _=0,y=0,w=[];while(y<p.length){x.lastIndex=g?y:0;var T,C=c(x,g?p:p.slice(y));if(null===C||(T=d(a(x.lastIndex+(g?0:y)),p.length))===_)y=i(p,y,h);else{if(w.push(p.slice(_,y)),w.length===R)return w;for(var F=1;F<=C.length-1;F++)if(w.push(C[F]),w.length===R)return w;y=_=T}}return w.push(p.slice(_)),w}]})},"2f21":function(t,e,o){"use strict";var s=o("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},"520a":function(t,e,o){"use strict";var s=o("0bfb"),r=RegExp.prototype.exec,n=String.prototype.replace,i=r,a="lastIndex",c=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[a]||0!==e[a]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(i=function(t){var e,o,i,u,d=this;return l&&(o=new RegExp("^"+d.source+"$(?!\\s)",s.call(d))),c&&(e=d[a]),i=r.call(d,t),c&&i&&(d[a]=d.global?i.index+i[0].length:e),l&&i&&i.length>1&&n.call(i[0],o,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)}),i}),t.exports=i},"55dd":function(t,e,o){"use strict";var s=o("5ca1"),r=o("d8e8"),n=o("4bf8"),i=o("79e5"),a=[].sort,c=[1,2,3];s(s.P+s.F*(i(function(){c.sort(void 0)})||!i(function(){c.sort(null)})||!o("2f21")(a)),"Array",{sort:function(t){return void 0===t?a.call(n(this)):a.call(n(this),r(t))}})},"58fa":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[o("strong",[t._v(t._s(t.forumTopic.title))]),o("div",{staticClass:"float-right"},[o("UserUnit",{staticClass:"float-left",attrs:{size:"middle"}}),t._v("    \n            "+t._s(t.forumTopic.createdAt)+"\n        ")],1),t.isCourseTeacher?o("el-button",{staticStyle:{float:"right"},on:{click:function(e){return t.banForum(t.forumTopic.id)}}},[t._v("封贴")]):t._e()],1),o("div",[o("pre",[t._v(t._s(t.forumTopic.content))])]),o("div",{staticClass:"float-right"},[o("AddForumResponse",{attrs:{"sec-no":t.forumTopic.secNo,path:t.forumTopic.path}})],1),o("div",{staticClass:"float-right"},[o("el-switch",{attrs:{"active-text":"显示回复","active-color":"#13ce66"},model:{value:t.showResponse,callback:function(e){t.showResponse=e},expression:"showResponse"}})],1),o("div",{staticClass:"float-clear"}),t.showResponse?o("div",[o("el-divider",[t._v("回复")]),t._l(t.forumTopic.responses,function(t){return o("CourseForumResponse",{key:t.createdAt,attrs:{response:t}})})],2):t._e()])},r=[],n=o("cebc"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"float-left"},[o("UserUnit",{attrs:{size:"middle"}})],1),o("div",{staticClass:"float-right"},[t._v(t._s(t.response.createdAt))]),o("div",{staticClass:"float-clear"})]),o("pre",[t._v(t._s(t.response.content))]),o("div",{staticClass:"float-right"},[o("AddForumResponse",{attrs:{"sec-no":t.response.secNo,path:t.response.path}})],1),0!==t.response.responses.length?o("div",{staticClass:"float-right"},[o("el-switch",{attrs:{"active-text":"显示回复","active-color":"#13ce66"},model:{value:t.showResponse,callback:function(e){t.showResponse=e},expression:"showResponse"}})],1):t._e(),o("div",{staticClass:"float-clear"}),t.showResponse?o("div",[o("el-divider",[t._v("回复")]),t._l(t.response.responses,function(t){return o("CourseForumResponse",{key:t.createdAt,attrs:{response:t}})})],2):t._e()])},a=[],c=o("59f0"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showAdd}},[t._v("发布回复")]),o("el-dialog",{attrs:{visible:t.addResponse},on:{"update:visible":function(e){t.addResponse=e}}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("h2",[t._v("发布回复")])]),o("div",[o("el-form",{attrs:{model:t.addTopic,"label-position":"right","label-width":"80px"}},[o("el-form-item",{attrs:{prop:"content",label:"添加内容"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:t.addTopic.content,callback:function(e){t.$set(t.addTopic,"content",e)},expression:"addTopic.content"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.commitAdd}},[t._v("添加")])],1)])],1)},u=[],d={name:"AddForumTopic",props:{secNo:{default:1},path:{default:""}},data:function(){return{addResponse:!1,addTopic:{content:""}}},methods:{showAdd:function(){this.addResponse=!0},commitAdd:function(){this.$http.request({url:this.$store.getters.getCourseUrl+"sections/"+this.secNo+"/forums",method:"post",headers:this.$store.getters.authRequestHead,data:{content:this.addTopic.content,path:this.path}}).then(function(t){alert("发布成功！"),console.log(t.data)}).catch(function(t){alert(t),console.log(t.response)})}}},p=d,f=o("2877"),h=Object(f["a"])(p,l,u,!1,null,"78ccc8d9",null),v=h.exports,m={name:"CourseForumResponse",components:{UserUnit:c["a"],AddForumResponse:v},props:{response:Object},data:function(){return{showResponse:!1}}},g=m,b=Object(f["a"])(g,i,a,!1,null,"f9a36620",null),x=b.exports,R=o("2f62"),_={name:"CourseForumStart",components:{AddForumResponse:v,UserUnit:c["a"],CourseForumResponse:x},props:{forumTopic:Object},data:function(){return{showResponse:!1}},methods:{banForum:function(t){alert("确定要封贴吗？"),this.$http.request({url:"/api/forums/"+t,method:"delete",headers:this.$store.getters.authRequestHead}).then(function(t){console.log(t.data),alert("请求成功")}).catch(function(t){console.log(t.response),alert("请求失败")})}},computed:Object(n["a"])({},Object(R["b"])(["isCourseTeacher"]))},y=_,w=Object(f["a"])(y,s,r,!1,null,"857e463e",null);e["a"]=w.exports},"5f1b":function(t,e,o){"use strict";var s=o("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var o=t.exec;if("function"===typeof o){var n=o.call(t,e);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==s(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},6663:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.showAdd}},[t._v("发布帖子")]),o("el-dialog",{attrs:{visible:t.addResponse},on:{"update:visible":function(e){t.addResponse=e}}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("h2",[t._v("发布帖子")])]),o("div",[o("el-form",{attrs:{model:t.addTopic,"label-position":"right","label-width":"80px"}},[o("el-form-item",{attrs:{prop:"title",label:"添加标题"}},[o("el-input",{model:{value:t.addTopic.title,callback:function(e){t.$set(t.addTopic,"title",e)},expression:"addTopic.title"}})],1),o("el-form-item",{attrs:{prop:"content",label:"添加内容"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:t.addTopic.content,callback:function(e){t.$set(t.addTopic,"content",e)},expression:"addTopic.content"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.commitAdd}},[t._v("添加")])],1)])],1)},r=[],n={name:"AddForumTopic",props:{secNo:{default:1}},data:function(){return{addResponse:!1,addTopic:{title:"",content:""}}},methods:{showAdd:function(){this.addResponse=!0},commitAdd:function(){this.$http.request({url:this.$store.getters.getCourseUrl+"sections/"+this.secNo+"/forums",method:"post",headers:this.$store.getters.authRequestHead,data:this.addTopic}).then(function(t){alert("发布成功！"),console.log(t.data)}).catch(function(t){alert(t),console.log(t.response)})}}},i=n,a=o("2877"),c=Object(a["a"])(i,s,r,!1,null,"44e04102",null);e["a"]=c.exports},aae3:function(t,e,o){var s=o("d3f4"),r=o("2d95"),n=o("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==r(t))}},b0c5:function(t,e,o){"use strict";var s=o("520a");o("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},db96:function(t,e,o){}}]);
//# sourceMappingURL=chunk-658b36df.ec617020.js.map